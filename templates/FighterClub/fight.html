{% extends "base.html" %}

{% block page_title %}–°—Ä–∞–∂–µ–Ω–∏–µ{% endblock %}

{% block page_main %}
<form action='/fight/' method='post'>
<table>
    {% for row in monsters_rows %}
    <tr>
        {% if forloop.counter == 1 %}
        <td>
            <div style="border: thick double #aaaaaa; padding: 5px; width: 200px;">
                <h4>{{ fighter.name }}</h4>
                <hr/>
                <p><strong>–ó–¥–æ—Ä–æ–≤—å–µ:</strong> {{ fighter.health }} / {{ fighter.max_health }}</p>
                <hr/>
                <p><strong>–ó–∞—â–∏—Ç–∏—Ç—å:</strong></p>
                {% for equipment in fighter.fighterequipment_set.all %}
                <p>
                {% if forloop.counter == 1 %}
                <input type="radio" name="defence" id="{{ equipment.id }}" value="{{ equipment.body_part.name }}" checked/>
                {% else %}
                <input type="radio" name="defence" id="{{ equipment.id }}" value="{{ equipment.body_part.name }}"/>
                {% endif %}                
                <label for="{{ equipment.id }}">{{ equipment.body_part.name }} - üõ°Ô∏è
                {% if equipment.armor.armor %}
                    {{ equipment.armor.armor }}
                {% else %}
                    0
                {% endif %}
                </label>
                </p>
                {% endfor %}
            </div>            
        </td>
        <td>
            <div style="margin: 10px;">
                üí• ‚öîÔ∏è üí•
            </div>
        </td>
        {% else %}
        <td></td>
        <td></td>
        {% endif %}

        {% for fight_monster in row %}
        <td>
            <div style="border: thick double #aaaaaa; padding: 5px; width: 200px">
                <h4>{{ fight_monster.monster.name }}</h4>
                <hr/>
                <p><strong>–ó–¥–æ—Ä–æ–≤—å–µ:</strong> {{ fight_monster.hp }} / {{ fight_monster.monster.max_hp }}</p>
                <hr/>
                <p><strong>–ê—Ç–∞–∫–æ–≤–∞—Ç—å:</strong></p>
                {% for monster_armor in fight_monster.monster.monsterarmor_set.all %}
                <p>
                {% if forloop.counter == 1 %}
                <input type="radio" name="attack" id="{{ monster_armor.id }}" value="{{ monster_armor.id }} {{ fight_monster.id }}" checked/>
                {% else %}
                <input type="radio" name="attack" id="{{ monster_armor.id }}" value="{{ monster_armor.id }} {{ fight_monster.id }}"/>
                {% endif %}                
                <label for="{{ monster_armor.id }}">{{ monster_armor.body_part.name }} - üõ°Ô∏è {{ monster_armor.armor }}</label>
                </p>
                {% endfor %}
            </div>
        </td>
        {% endfor %}
    </tr>
    {% endfor %}
</table>
{% if log %}
<div>
    {% for log_line in log %}
    <p>{{ log_line }}</p>
    {% endfor %}
</div>
{% endif %}
<div>
    <button type="submit">–ó–∞–≤–µ—Ä—à–∏—Ç—å —Ö–æ–¥</button>
</div>
{% csrf_token %}
</form>
{% endblock %}

{% block page_footer %}
    {% if user.is_authenticated %}
    <a href='./logout/'>–í—ã–π—Ç–∏</a>
    {% endif %}
{% endblock %}
